2026-01-19 10:49:25,298 - INFO - âœ… Connected to SQLite database
2026-01-19 10:49:25,299 - INFO - ğŸ” Fetched menu items
2026-01-19 10:49:25,300 - ERROR - {'error': "string indices must be integers, not 'str'", 'message': 'âŒ Menu fetch failed'}
2026-01-19 10:49:25,300 - INFO - ğŸ” Database connection closed
2026-01-19 10:49:25,300 - INFO - ğŸ½ï¸ OrderHandler initialized
2026-01-19 10:52:13,951 - INFO - âœ… Connected to SQLite database
2026-01-19 10:52:13,952 - INFO - ğŸ” Fetched menu items
2026-01-19 10:52:13,952 - INFO - ğŸ” Fetched menu
2026-01-19 10:52:13,952 - INFO - ğŸ” Database connection closed
2026-01-19 10:52:13,952 - INFO - ğŸ½ï¸ OrderHandler initialized
2026-01-19 11:10:47,450 - INFO - âœ… Connected to SQLite database
2026-01-19 11:10:47,451 - INFO - ğŸ” Fetched menu items
2026-01-19 11:10:47,451 - INFO - ğŸ” Fetched menu
2026-01-19 11:10:47,451 - INFO - ğŸ” Database connection closed
2026-01-19 11:10:47,452 - INFO - ğŸ½ï¸ OrderHandler initialized
2026-01-19 11:11:00,709 - INFO - âœ… Connected to SQLite database
2026-01-19 11:11:01,050 - INFO - {'username': 'umer', 'role': 'customer', 'message': 'User logged in'}
2026-01-19 11:11:01,550 - INFO - ğŸ” Database connection closed
2026-01-19 11:11:01,625 - INFO - {'message': 'Rendering home page'}
2026-01-19 11:11:10,355 - INFO - âœ… Connected to SQLite database
2026-01-19 11:11:10,357 - INFO - ğŸ” Fetched menu items
2026-01-19 11:11:10,358 - INFO - ğŸ” Database connection closed
2026-01-19 11:11:14,122 - INFO - {'user': 'umer', 'query': 'hello', 'message': 'User submitted chatbot query'}
2026-01-19 11:11:14,124 - INFO - Streaming query: hello
2026-01-19 11:11:14,125 - INFO - Graph not found, building new graph
2026-01-19 11:11:14,125 - INFO - ğŸ“ˆ Building workflow
2026-01-19 11:11:14,135 - INFO - âœ… Graph built successfully
2026-01-19 11:11:14,136 - INFO - Graph initialized
2026-01-19 11:11:14,171 - INFO - ğŸ”„ (Re)configuring LLM â†’ openai/gpt-oss-120b
2026-01-19 11:11:15,047 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:11:15,309 - INFO - ğŸ’¬ LLM response: Hello! ğŸ‘‹ How can I assist you today?  
âœ… Show the menu, place an order, check an order status, or anything else?  

Anything else I can help with? ğŸ˜Š
2026-01-19 11:11:15,346 - INFO - ğŸ’¬ Q&A logged
2026-01-19 11:11:15,347 - INFO - {'user': 'umer', 'response': 'Hello! ğŸ‘‹ How can I assist you today?  \nâœ… Show the menu, place an order, check an order status, or anything else?  \n\nAnything else I can help with? ğŸ˜Š', 'message': 'Chatbot response generated'}
2026-01-19 11:11:31,616 - INFO - {'user': 'umer', 'query': 'i want to place order', 'message': 'User submitted chatbot query'}
2026-01-19 11:11:31,619 - INFO - Streaming query: i want to place order
2026-01-19 11:11:31,659 - INFO - Retrying request to /openai/v1/chat/completions in 0.466629 seconds
2026-01-19 11:11:32,249 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:11:32,490 - INFO - ğŸ’¬ LLM response: Sure thing! ğŸ½ï¸ What would you like to order? Just let me know the items and quantities (e.g., â€œ2 burgers, 1 cokeâ€).  

Anything else I can help with? ğŸ˜Š
2026-01-19 11:11:32,497 - INFO - ğŸ’¬ Q&A logged
2026-01-19 11:11:32,497 - INFO - {'user': 'umer', 'response': 'Sure thing! ğŸ½ï¸ What would you like to order? Just let me know the items and quantities (e.g., â€œ2 burgers, 1 cokeâ€).  \n\nAnything else I can help with? ğŸ˜Š', 'message': 'Chatbot response generated'}
2026-01-19 11:11:50,031 - INFO - {'user': 'umer', 'query': 'add 100 Zinger burger with respective pepsi', 'message': 'User submitted chatbot query'}
2026-01-19 11:11:50,033 - INFO - Streaming query: add 100 Zinger burger with respective pepsi
2026-01-19 11:11:50,066 - INFO - Retrying request to /openai/v1/chat/completions in 0.425609 seconds
2026-01-19 11:11:50,584 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:11:50,769 - INFO - ğŸ’¬ LLM response: 
2026-01-19 11:11:50,769 - INFO - Tool calls: [{'name': 'get_prices_for_items', 'args': {'items': ['Zinger burger', 'Pepsi']}, 'id': 'fc_60373127-a562-4031-a271-a64ba327b2bf', 'type': 'tool_call'}]
2026-01-19 11:11:50,777 - INFO - âœ… Connected to SQLite database (Async)
2026-01-19 11:11:50,778 - INFO - ğŸ” Fetched menu items (Async)
2026-01-19 11:11:50,779 - INFO - ğŸ’° Prices fetched for 2 items
2026-01-19 11:11:50,779 - INFO - ğŸ” Database connection closed (Async)
2026-01-19 11:11:50,894 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:11:51,457 - INFO - ğŸ’¬ LLM response: Hereâ€™s a summary of your order:

| Item          | Qty | Unit Price | Subtotal |
|---------------|-----|------------|----------|
| Zinger burger | 100 | $2.99      | $299.00 |
| Pepsi         | 100 | $2.49      | $249.00 |
**Total: $548.00**

âœ… Does everything look correct? Let me know if youâ€™d like to confirm this order or make any changes.  

Anything else I can help with? ğŸ˜Š
2026-01-19 11:11:51,473 - INFO - ğŸ’¬ Q&A logged
2026-01-19 11:11:51,474 - INFO - {'user': 'umer', 'response': 'Hereâ€™s a summary of your order:\n\n| Item          | Qty | Unit Price | Subtotal |\n|---------------|-----|------------|----------|\n| Zinger burger | 100 | $2.99      | $299.00 |\n| Pepsi         | 100 | $2.49      | $249.00 |\n**Total: $548.00**\n\nâœ… Does everything look correct? Let me know if youâ€™d like to confirm this order or make any changes.  \n\nAnything else I can help with? ğŸ˜Š', 'message': 'Chatbot response generated'}
2026-01-19 11:12:12,349 - INFO - {'user': 'umer', 'query': 'great, what else in spicy??', 'message': 'User submitted chatbot query'}
2026-01-19 11:12:12,352 - INFO - Streaming query: great, what else in spicy??
2026-01-19 11:12:12,404 - INFO - Retrying request to /openai/v1/chat/completions in 0.430625 seconds
2026-01-19 11:12:12,932 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:12:13,205 - INFO - ğŸ’¬ LLM response: 
2026-01-19 11:12:13,206 - INFO - Tool calls: [{'name': 'get_full_menu', 'args': {}, 'id': 'fc_47031ef2-bff2-4152-bd9d-0dc7d6ccb602', 'type': 'tool_call'}]
2026-01-19 11:12:13,208 - INFO - âœ… Connected to SQLite database (Async)
2026-01-19 11:12:13,209 - INFO - ğŸ” Fetched menu items (Async)
2026-01-19 11:12:13,209 - INFO - ğŸ” Full menu fetched
2026-01-19 11:12:13,210 - INFO - ğŸ” Database connection closed (Async)
2026-01-19 11:12:13,211 - INFO - Cached new menu in state
2026-01-19 11:12:13,219 - INFO - âœ… Connected to SQLite database (Async)
2026-01-19 11:12:13,219 - INFO - ğŸ” Fetched menu items (Async)
2026-01-19 11:12:13,219 - INFO - ğŸ” Full menu fetched
2026-01-19 11:12:13,220 - INFO - ğŸ” Database connection closed (Async)
2026-01-19 11:12:13,321 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:12:14,121 - INFO - ğŸ’¬ LLM response: Here are the spicy options from our menu ğŸ“œ:

| Item | Price |
|------|-------|
| **Zinger burger** ğŸŒ¶ï¸ | $2.99 |
| **Pepperoni Pizza** ğŸŒ¶ï¸ | $12.99 |
| **BBQ Chicken Pizza** (has a mild kick) ğŸŒ¶ï¸ | $13.99 |
| **Tandoori Chicken** ğŸŒ¶ï¸ | $11.99 |
| **Chicken Biryani** ğŸŒ¶ï¸ | $8.99 |
| **Mutton Biryani** ğŸŒ¶ï¸ | $10.99 |
| **Prawn Curry** ğŸŒ¶ï¸ | $13.49 |

Let me know if any of these sound good and youâ€™d like to add them to your order, or if youâ€™d like anything else!  

Anything else I can help with? ğŸ˜Š
2026-01-19 11:12:14,132 - INFO - ğŸ’¬ Q&A logged
2026-01-19 11:12:14,132 - INFO - {'user': 'umer', 'response': 'Here are the spicy options from our menu ğŸ“œ:\n\n| Item | Price |\n|------|-------|\n| **Zinger burger** ğŸŒ¶ï¸ | $2.99 |\n| **Pepperoni Pizza** ğŸŒ¶ï¸ | $12.99 |\n| **BBQ Chicken Pizza** (has a mild kick) ğŸŒ¶ï¸ | $13.99 |\n| **Tandoori Chicken** ğŸŒ¶ï¸ | $11.99 |\n| **Chicken Biryani** ğŸŒ¶ï¸ | $8.99 |\n| **Mutton Biryani** ğŸŒ¶ï¸ | $10.99 |\n| **Prawn Curry** ğŸŒ¶ï¸ | $13.49 |\n\nLet me know if any of these sound good and youâ€™d like to add them to your order, or if youâ€™d like anything else!  \n\nAnything else I can help with? ğŸ˜Š', 'message': 'Chatbot response generated'}
2026-01-19 11:12:33,438 - INFO - {'user': 'umer', 'query': 'add pepperoni pizza with repective qunatity', 'message': 'User submitted chatbot query'}
2026-01-19 11:12:33,441 - INFO - Streaming query: add pepperoni pizza with repective qunatity
2026-01-19 11:12:33,451 - INFO - ğŸ”„ (Re)configuring LLM â†’ llama-3.3-70b-versatile
2026-01-19 11:12:33,706 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:12:33,832 - INFO - âœ… Conversation summarized. New summary length: 81 chars
2026-01-19 11:12:33,885 - INFO - Retrying request to /openai/v1/chat/completions in 0.422420 seconds
2026-01-19 11:12:34,413 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:12:34,739 - INFO - ğŸ’¬ LLM response: Sure! How manyâ€¯**Pepperoni Pizzas** would you like to add to your order? ğŸ•  

Anything else I can help with? ğŸ˜Š
2026-01-19 11:12:34,777 - INFO - ğŸ’¬ Q&A logged
2026-01-19 11:12:34,778 - INFO - {'user': 'umer', 'response': '* Pending: 100 Zinger burgers, 100 Pepsi \n* Open question: other spicy menu itemsSure! How many\u202f**Pepperoni Pizzas** would you like to add to your order? ğŸ•  \n\nAnything else I can help with? ğŸ˜Š', 'message': 'Chatbot response generated'}
2026-01-19 11:13:34,681 - INFO - {'user': 'umer', 'query': "what's in my total orde rcard??", 'message': 'User submitted chatbot query'}
2026-01-19 11:13:34,684 - INFO - Streaming query: what's in my total orde rcard??
2026-01-19 11:13:34,745 - INFO - Retrying request to /openai/v1/chat/completions in 0.408133 seconds
2026-01-19 11:13:35,269 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:13:36,665 - INFO - ğŸ’¬ LLM response: 
2026-01-19 11:13:36,665 - INFO - Tool calls: [{'name': 'get_prices_for_items', 'args': {'items': ['Zinger burger', 'Pepsi']}, 'id': 'fc_71a672cc-fa74-4484-8563-b2fcfc3d33b7', 'type': 'tool_call'}]
2026-01-19 11:13:36,673 - INFO - âœ… Connected to SQLite database (Async)
2026-01-19 11:13:36,673 - INFO - ğŸ” Fetched menu items (Async)
2026-01-19 11:13:36,673 - INFO - ğŸ’° Prices fetched for 2 items
2026-01-19 11:13:36,674 - INFO - ğŸ” Database connection closed (Async)
2026-01-19 11:13:36,772 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:13:37,626 - INFO - ğŸ’¬ LLM response: Hereâ€™s the current content of your order card ğŸ“¦:

| Item          | Qty | Unit Price | Subtotal |
|---------------|-----|------------|----------|
| Zinger burger | 100 | $2.99      | $299.00 |
| Pepsi         | 100 | $2.49      | $249.00 |
| **Total**     | â€”   | â€”          | **$548.00** |

We havenâ€™t received a quantity for the **Pepperoni Pizza** yet. Would you like to add some, or would you like to confirm and place the order as shown above? âœ…  

Anything else I can help with? ğŸ˜Š
2026-01-19 11:13:37,635 - INFO - ğŸ’¬ Q&A logged
2026-01-19 11:13:37,636 - INFO - {'user': 'umer', 'response': 'Hereâ€™s the current content of your order card ğŸ“¦:\n\n| Item          | Qty | Unit Price | Subtotal |\n|---------------|-----|------------|----------|\n| Zinger burger | 100 | $2.99      | $299.00 |\n| Pepsi         | 100 | $2.49      | $249.00 |\n| **Total**     | â€”   | â€”          | **$548.00** |\n\nWe havenâ€™t received a quantity for the **Pepperoni Pizza** yet. Would you like to add some, or would you like to confirm and place the order as shown above? âœ…  \n\nAnything else I can help with? ğŸ˜Š', 'message': 'Chatbot response generated'}
2026-01-19 11:13:52,475 - INFO - {'user': 'umer', 'query': 'add 100 that too', 'message': 'User submitted chatbot query'}
2026-01-19 11:13:52,477 - INFO - Streaming query: add 100 that too
2026-01-19 11:13:52,491 - INFO - Retrying request to /openai/v1/chat/completions in 0.492596 seconds
2026-01-19 11:13:53,082 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:13:53,272 - INFO - âœ… Conversation summarized. New summary length: 152 chars
2026-01-19 11:13:53,326 - INFO - Retrying request to /openai/v1/chat/completions in 0.405319 seconds
2026-01-19 11:13:53,860 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:13:54,119 - INFO - ğŸ’¬ LLM response: 
2026-01-19 11:13:54,120 - INFO - Tool calls: [{'name': 'get_prices_for_items', 'args': {'items': ['Pepperoni Pizza']}, 'id': 'fc_d51b52f3-c074-4c69-86e6-ba2ec6693f60', 'type': 'tool_call'}]
2026-01-19 11:13:54,126 - INFO - âœ… Connected to SQLite database (Async)
2026-01-19 11:13:54,127 - INFO - ğŸ” Fetched menu items (Async)
2026-01-19 11:13:54,127 - INFO - ğŸ’° Prices fetched for 1 items
2026-01-19 11:13:54,128 - INFO - ğŸ” Database connection closed (Async)
2026-01-19 11:13:54,225 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:13:55,362 - INFO - ğŸ’¬ LLM response: Hereâ€™s the updated order card ğŸ“¦ with the added Pepperoni Pizzas:

| Item            | Qty | Unit Price | Subtotal |
|-----------------|-----|------------|----------|
| Zinger burger   | 100 | $2.99      | $299.00 |
| Pepsi           | 100 | $2.49      | $249.00 |
| Pepperoni Pizza | 100 | $12.99     | $1,299.00 |
| **Total**       | â€”   | â€”          | **$1,847.00** |

Everything looks good! Shall I go ahead and place this order for you? âœ…  

Anything else I can help with? ğŸ˜Š
2026-01-19 11:13:55,372 - INFO - ğŸ’¬ Q&A logged
2026-01-19 11:13:55,372 - INFO - {'user': 'umer', 'response': '* Pending: 100 Zinger burgers, 100 Pepsi, Pepperoni Pizza (quantity unknown)\n* Open question: quantity of Pepperoni Pizza to add, other spicy menu itemsHereâ€™s the updated order card ğŸ“¦ with the added Pepperoni Pizzas:\n\n| Item            | Qty | Unit Price | Subtotal |\n|-----------------|-----|------------|----------|\n| Zinger burger   | 100 | $2.99      | $299.00 |\n| Pepsi           | 100 | $2.49      | $249.00 |\n| Pepperoni Pizza | 100 | $12.99     | $1,299.00 |\n| **Total**       | â€”   | â€”          | **$1,847.00** |\n\nEverything looks good! Shall I go ahead and place this order for you? âœ…  \n\nAnything else I can help with? ğŸ˜Š', 'message': 'Chatbot response generated'}
2026-01-19 11:14:06,387 - INFO - {'user': 'umer', 'query': 'yes confirm it', 'message': 'User submitted chatbot query'}
2026-01-19 11:14:06,390 - INFO - Streaming query: yes confirm it
2026-01-19 11:14:06,440 - INFO - Retrying request to /openai/v1/chat/completions in 0.455340 seconds
2026-01-19 11:14:07,018 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:14:07,435 - INFO - ğŸ’¬ LLM response: 
2026-01-19 11:14:07,435 - INFO - Tool calls: [{'name': 'save_order', 'args': {'order_details': '{"items": {"Zinger burger": 100, "Pepsi": 100, "Pepperoni Pizza": 100}, "total_price": 1847.0}'}, 'id': 'fc_5a286356-e8ab-4de7-8c0f-689b9b7f40db', 'type': 'tool_call'}]
2026-01-19 11:14:07,441 - INFO - ğŸ’¾ Received order
2026-01-19 11:14:07,441 - INFO - ğŸ½ï¸ Items found
2026-01-19 11:14:07,442 - INFO - âœ… Connected to SQLite database (Async)
2026-01-19 11:14:07,457 - INFO - âœ… Order stored (Async)
2026-01-19 11:14:07,457 - INFO - âœ… Order saved
2026-01-19 11:14:07,459 - INFO - ğŸ” Database connection closed (Async)
2026-01-19 11:14:07,562 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:14:08,166 - INFO - ğŸ’¬ LLM response: âœ… Your order has been placed successfully!

**Order Summary**  
| Item            | Qty | Unit Price | Subtotal |
|-----------------|-----|------------|----------|
| Zinger burger   | 100 | $2.99      | $299.00 |
| Pepsi           | 100 | $2.49      | $249.00 |
| Pepperoni Pizza | 100 | $12.99     | $1,299.00 |
| **Total**       | â€”   | â€”          | **$1,847.00** |

**Order ID:** 365  
**Estimated delivery:** 40â€¯minutes  

If youâ€™d like to track the order, modify it, or need anything else, just let me know. Anything else I can help with? ğŸ˜Š
2026-01-19 11:14:08,176 - INFO - ğŸ’¬ Q&A logged
2026-01-19 11:14:08,177 - INFO - {'user': 'umer', 'response': 'âœ… Your order has been placed successfully!\n\n**Order Summary**  \n| Item            | Qty | Unit Price | Subtotal |\n|-----------------|-----|------------|----------|\n| Zinger burger   | 100 | $2.99      | $299.00 |\n| Pepsi           | 100 | $2.49      | $249.00 |\n| Pepperoni Pizza | 100 | $12.99     | $1,299.00 |\n| **Total**       | â€”   | â€”          | **$1,847.00** |\n\n**Order ID:** 365  \n**Estimated delivery:** 40\u202fminutes  \n\nIf youâ€™d like to track the order, modify it, or need anything else, just let me know. Anything else I can help with? ğŸ˜Š', 'message': 'Chatbot response generated'}
2026-01-19 11:14:13,879 - INFO - {'user': 'umer', 'query': 'great thank you', 'message': 'User submitted chatbot query'}
2026-01-19 11:14:13,882 - INFO - Streaming query: great thank you
2026-01-19 11:14:13,897 - INFO - Retrying request to /openai/v1/chat/completions in 0.444710 seconds
2026-01-19 11:14:14,447 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:14:14,581 - INFO - âœ… Conversation summarized. New summary length: 104 chars
2026-01-19 11:14:14,660 - INFO - Retrying request to /openai/v1/chat/completions in 0.470603 seconds
2026-01-19 11:14:15,239 - INFO - HTTP Request: POST https://api.groq.com/openai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 11:14:15,566 - INFO - ğŸ’¬ LLM response: Youâ€™re welcome! Iâ€™m glad everythingâ€™s set. ğŸ˜Š  
Anything else I can help you with?
2026-01-19 11:14:15,582 - INFO - ğŸ’¬ Q&A logged
2026-01-19 11:14:15,583 - INFO - {'user': 'umer', 'response': '* Confirmed order: Order ID unknown, 100 Zinger burgers, 100 Pepsi, 100 Pepperoni Pizza, total $1,847.00Youâ€™re welcome! Iâ€™m glad everythingâ€™s set. ğŸ˜Š  \nAnything else I can help you with?', 'message': 'Chatbot response generated'}
2026-01-19 11:14:37,748 - INFO - {'order_id': '365', 'message': 'Fetching order details'}
2026-01-19 11:14:37,749 - INFO - âœ… Connected to SQLite database
2026-01-19 11:14:37,750 - INFO - {'order_id': 365, 'message': 'Order details fetched'}
2026-01-19 11:14:37,750 - INFO - ğŸ” Database connection closed
